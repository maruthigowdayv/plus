<template>
<div class="page">
  <div class="navbar">
    <div class="navbar-inner sliding">
      <div class="left split-off">
        <a class="link back">
          <i class="icon icon-back"></i>
          <span class="ios-only">Back</span>
        </a>
      </div>
      <div class="title split-off">Modules</div>
	  
		<div class="left split-on">
			<a class="link">
				<i class="material-icons">airline_seat_recline_extra</i>
				<span>Modules</span>
            </a>
		</div>

    </div>
  </div>
  <div class="page-content">

		<p class="block"><img src="{{jcp_plus_creator_image}}"/>Let's do more at ease! Believe, Innovate, Inspire.</p>

		<div class="list">
		<ul>
		{{#each modules}}
			<li>
			  <a data-goto="module--{{js "return this.split('|')[1].toLowerCase().replace(/\&/g,'and').replace(/ /g, '-')"}}/" class="item-link item-content">
				<div class="item-media"><i class="icon material-icons">{{js "return this.split('|')[0]"}}</i></div>
				<div class="item-inner">
				  <div class="item-title">{{js "return this.split('|')[1]"}}</div>
				  <div class="item-after"></div>
				</div>
			  </a>
			</li>
		{{/each}}
		{{get_new_modules}}
		</ul>
		</div>

  </div>
</div>
</template>

<style>
.panel-right.panel-visible-by-breakpoint ~ .view .navbar .panel-open[data-panel="right"] {
  display: none;
}

.ios .panel-right:not(.panel-visible-by-breakpoint).panel-active ~ .view-main:before,
.ios .panel-right:not(.panel-visible-by-breakpoint).panel-closing ~ .view-main:before {
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  width: 1px;
  background: rgba(0,0,0,0.1);
  content: '';
  z-index: 6000;
}

</style>

<script>
return	{
	data: function () {
        return {
			jcp_plus_creator_image: app.data.creator_image,
			modules: function(){
				all_modules = app.data.warrior.access_modules.split('\n');
				my_modules = {};
				for(i=0;i<all_modules.length;i++){
					if(all_modules[i].substring(0,1)=='+'){my_modules[i] = all_modules[i].substring(1)}
				}
				return my_modules;
			},
			get_new_modules: function(){
				get_new_modules_html = ''
				if(app.data.warrior.access_modules.indexOf('\n-')>0){
					get_new_modules_html = '<li> <a data-goto="module--get-more-modules/" class="item-link item-content"> <div class="item-media"><i class="icon material-icons">add_circle</i></div> <div class="item-inner"> <div class="item-title">Get More Modules</div> <div class="item-after"></div> </div> </a> </li>';
				};
				return get_new_modules_html;
			},
		}
	},
  }
</script>
