<template>
<div class="page">
  <div class="navbar">
    <div class="navbar-inner sliding">
      <div class="left">
        <a class="link back">
          <i class="icon icon-back"></i>
          <span class="ios-only">Back</span>
        </a>
      </div>
	  <div class="title split-only"><i class="material-icons" style="float:left;margin-right:10px;">airline_seat_recline_extra</i>My Modules</div>
      <div class="title">My Modules</div>
	  <div class="right">
		<a class="link icon-only searchbar-enable" data-searchbar=".searchbar-my-modules">
          <i class="icon f7-icons ios-only">search_strong</i>
          <i class="icon material-icons md-only">search</i>
        </a>
      </div>
      <form data-search-container=".search-list" data-search-in=".item-title" class="searchbar searchbar-expandable searchbar-my-modules searchbar-init">
        <div class="searchbar-inner">
          <div class="searchbar-input-wrap">
            <input type="search" placeholder="Search"/>
            <i class="searchbar-icon"></i>
            <span class="input-clear-button"></span>
          </div>
          <span class="searchbar-disable-button">Cancel</span>
        </div>
      </form>
    </div>
  </div>
  <div class="page-content">
		<div class="searchbar-backdrop"></div>

		<div class="block searchbar-hide-on-search"><img src="{{jcp_plus_creator_image}}"/>Let's do more at ease! Believe, Innovate, Inspire.</div>

		<div class="block searchbar-not-found">No such module(s) found.<br><br>Change your search query or exit search.</div>

		<div class="list search-list searchbar-found">
		<ul>
		{{#each modules}}
			<li>
			  <a data-goto="module--{{js "return this.split('|')[1].toLowerCase().replace(/\&/g,'and').replace(/ /g, '-')"}}/" class="item-link item-content">
				<div class="item-media"><i class="icon material-icons">{{js "return this.split('|')[0]"}}</i></div>
				<div class="item-inner">
				  <div class="item-title">{{js "return this.split('|')[1]"}}</div>
				  <div class="item-after"></div>
				</div>
			  </a>
			</li>
		{{/each}}
		{{get_new_modules}}
		</ul>
		</div>

  </div>
</div>
</template>

<style>
.panel-right.panel-visible-by-breakpoint:before {
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  width: 1px;
  background: rgba(0,0,0,0.1);
  content: '';
  z-index: 6000;
}

.panel-right.panel-visible-by-breakpoint ~ .view .navbar .panel-open[data-panel="right"] {
  display: none;
}

.ios .panel-right:not(.panel-visible-by-breakpoint).panel-active ~ .view-main:before,
.ios .panel-right:not(.panel-visible-by-breakpoint).panel-closing ~ .view-main:before {
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  width: 1px;
  background: rgba(0,0,0,0.1);
  content: '';
  z-index: 6000;
}

.searchbar-hide-on-search{
	padding-left: 70px!important;
}
.searchbar-hide-on-search img{
	position: absolute;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    left: 15px;
    top: -12px;
	-moz-box-shadow: 0px 0px 1px 0px #000;
    -webkit-box-shadow: 0px 0px 1px 0px #000;
    box-shadow: 0px 0px 1px 0px #000;
}
.searchbar-not-found{
	padding-left:16px!important;
}
</style>

<script>
return	{
	data: function () {
        return {
			jcp_plus_creator_image: app.data.creator_image,
			modules: function(){
				all_modules = app.data.warrior.access_modules.split('\n');
				my_modules = {};
				for(i=0;i<all_modules.length;i++){
					if(all_modules[i].substring(0,1)=='+'){my_modules[i] = all_modules[i].substring(1)}
				}
				return my_modules;
			},
			get_new_modules: function(){
				get_new_modules_html = ''
				if(app.data.warrior.access_modules.indexOf('\n-')>0){
					get_new_modules_html = '<li> <a data-goto="module--get-more-modules/" class="item-link item-content"> <div class="item-media"><i class="icon material-icons">add_circle</i></div> <div class="item-inner"> <div class="item-title">Get More Modules</div> <div class="item-after"></div> </div> </a> </li>';
				};
				return get_new_modules_html;
			},
		}
	},
  }
</script>
