<template>
<div class="page">
  <div class="navbar">
    <div class="navbar-inner sliding">
      <div class="left">
        <a class="link back">
          <i class="icon icon-back"></i>
          <span class="ios-only">Back</span>
        </a>
      </div>
      <div class="title">Get More Modules</div>
	  <div class="right">
		<a class="link icon-only searchbar-enable" data-searchbar=".searchbar-modules">
          <i class="icon f7-icons ios-only">search_strong</i>
          <i class="icon material-icons md-only">search</i>
        </a>
      </div>
      <form data-search-container=".search-list" data-search-in=".item-title" class="searchbar searchbar-expandable searchbar-modules searchbar-init">
        <div class="searchbar-inner">
          <div class="searchbar-input-wrap">
            <input type="search" placeholder="Search"/>
            <i class="searchbar-icon"></i>
            <span class="input-clear-button"></span>
          </div>
          <span class="searchbar-disable-button">Cancel</span>
        </div>
      </form>
    </div>
  </div>
  <div class="page-content">
		<div class="searchbar-backdrop"></div>

		<div class="block searchbar-hide-on-search"><img src="{{jcp_plus_co_creator_image}}"/>Select a module you wish to get access to.</div>

		<div class="block searchbar-not-found">No such module(s) found.<br><br>Change your search query or exit search.</div>

		<div class="list search-list searchbar-found">
		<ul>
		{{#each modules}}
			<li>
			  <a data-goto="form/?module={{js "return this.split('|')[1]"}}" class="item-link item-content">
				<div class="item-media"><i class="icon material-icons">{{js "return this.split('|')[0]"}}</i></div>
				<div class="item-inner">
				  <div class="item-title">{{js "return this.split('|')[1]"}}</div>
				  <div class="item-after"></div>
				</div>
			  </a>
			</li>
		{{/each}}
		</ul>
		</div>

  </div>

  
</div>
</template>

<style>
.searchbar-hide-on-search{
	padding-left: 70px!important;
}
.searchbar-hide-on-search img{
	position: absolute;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    left: 15px;
    top: -12px;
	-moz-box-shadow: 0px 0px 1px 0px #000;
    -webkit-box-shadow: 0px 0px 1px 0px #000;
    box-shadow: 0px 0px 1px 0px #000;
}
.searchbar-not-found{
	padding-left:16px!important;
}
</style>

<script>
return	{
	data: function () {
        return {
			jcp_plus_co_creator_image: app.data.co_creator_image,
			modules: function(){
				all_modules = app.data.warrior.access_modules.split('\n');
				my_modules = {};
				for(i=0;i<all_modules.length;i++){
					if(all_modules[i].substring(0,1)=='-'){my_modules[i] = all_modules[i].substring(1)}
				}
				return my_modules;
			}
		}
	},
  }
</script>
